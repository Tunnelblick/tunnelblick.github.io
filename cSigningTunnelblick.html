<!doctype html>
<html>
<head>
	<meta charset="UTF-8" lang="en">
	<meta name="description" content="Digitally Signing the application - Tunnelblick | Free open source OpenVPN VPN client server software GUI for Mac OS X.. Includes OpenVPN, OpenSSL, easy-rsa, and drivers.">
	<meta name="referrer" content="never">
	<title>Digitally Signing the application - Tunnelblick | Free open source OpenVPN VPN client server software GUI for Mac OS X.</title>
	<link rel="stylesheet" type="text/css"  href="/common/style.v5.css">
	<link rel="icon"       type="image/png" href="/common/favicon.v1.png">
</head>

<body>
<center><table><tr><td><font color="red">THIS IS A COPY OF A PAGE AT <a href="https://tunnelblick.net">THE OFFICIAL TUNNELBLICK WEBSITE</a> AS OF 2018-01-08 03:08:55 UTC</font></td></tr></table></center>

<div class="heading">
	<table>
		<tr>
			<td><a href="/"><img src="/common/tb-icon-64x64.v1.png" alt="tunnelblick icon" width="64" height="64"></a></td>
			<td class="heading1">Tunnelblick</td>
			<td class="heading2">free software for OpenVPN on OS&nbsp;X and macOS</td>
			<td class="heading3">
                <a href="/cLocalizeTranslate.html">We need translators for several languages&hellip;</a><br>
            </td>
		</tr>
	</table>
</div>


<div class="topnav">
<table class="topnav"><tbody><tr>
	<td class="topnav-normal"   ><a href="/index.html"      class="topnav">Home</a></td>
	<td class="topnav-normal"   ><a href="/downloads.html"  class="topnav">Downloads</a></td>
	<td class="topnav-normal"   ><a href="/support.html"    class="topnav">Support</a></td>
	<td class="topnav-highlight"><a href="/documents.html"  class="topnav">Documents</a></td>
	<td class="topnav-normal"   ><a href="/issues.html"     class="topnav">Issues</a></td>
	<td class="topnav-normal"   ><a href="/source.html"     class="topnav">Source</a></td>
	<td class="topnav-normal"   ><a href="/contribute.html" class="topnav">Contribute</a></td>
	<td class="topnav-normal"   ><a href="/reachus.html"    class="topnav">Contact</a></td>
	<td class="topnav-padding"  ></td>
</tbody></table>
</div>



<div class="content">
<div class="content-cSigningTunnelblick">
<table class="documents">
  <tr>
    <td class="documents-left">



<p><strong>Highlighted Articles</strong><br>
&nbsp;&nbsp;<a href="/cInstall.html">Installing Tunnelblick</a><br>
&nbsp;&nbsp;<a href="/cUninstall.html">Uninstalling Tunnelblick</a><br>
&nbsp;&nbsp;<a href="/cConfigT.html">Setting up Configurations</a><br>
&nbsp;&nbsp;<a href="/czUsing.html">Using Tunnelblick</a><br>
&nbsp;&nbsp;<a href="/cGettingVPNService.html">Getting VPN Service</a><br>
&nbsp;&nbsp;<a href="/cCommonProblems.html">Common Problems</a><br>
&nbsp;&nbsp;<a href="/cConfigO.html">Configuring OpenVPN</a><br>
&nbsp;&nbsp;<a href="/cRlsNotes.html">Release Notes</a><br>
&nbsp;&nbsp;<a href="/cThanks.html">Thanks</a><br>
&nbsp;&nbsp;<a href="/cFAQ.html">FAQ</a></p>

<p><strong><a href="https://groups.google.com/forum/#&#33;forum/tunnelblick-discuss">Discussion Group</a></strong><br>
&nbsp;&nbsp;<a href="/cBeforeYouPost.html">Read Before You Post</a></p>



    </td>
    <td class="documents-right">
    


<h1 id="digitally-signing-the-application">Digitally Signing the application</h1>
<p class=toc>On This Page<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#what-you-need">WHAT YOU NEED</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#os-x-10.9-mavericks-or-higher">OS X 10.9 (&quot;Mavericks&quot;) or Higher</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#unsigned-application">Unsigned Application</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#code-signing-certificate">Code signing Certificate</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#designated-requirement-binary">Designated Requirement Binary</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#signing-script">SIGNING SCRIPT</a><br>
</p> 
<p><em>Note: This page describes how to digitally sign the Tunnelblick application or a rebranded version. Please read <a href="cDigitalSignatures.html">Digital Signatures</a></em> before the rest of this page.</p>
<h2 id="what-you-need">WHAT YOU NEED</h2>
<p>To digitally sign the application (Tunnelblick or a rebranded version), you need:</p>
<ul>
<li>OS X 10.9 (&quot;Mavericks&quot;) or higher;</li>
<li>A copy of the unsigned application;</li>
<li>A code signing certificate; and</li>
<li>An optional &quot;designated requirement&quot; binary.</li>
</ul>
<h3 id="os-x-10.9-mavericks-or-higher">OS X 10.9 (&quot;Mavericks&quot;) or Higher</h3>
<p>You need Mac OS X 10.9 (&quot;Mavericks&quot;) because OS X 10.10 (&quot;Yosemite&quot;) requires applications to be signed using OS X 10.9.</p>
<h3 id="unsigned-application">Unsigned Application</h3>
<p>To get an unsigned version of Tunnelblick or your rebranded version, build an &quot;Unsigned Release&quot; of the source code using the instructions at <a href="cBuild.html">Building From Source</a>.</p>
<h3 id="code-signing-certificate">Code signing Certificate</h3>
<p>The code signing certificate can be a &quot;self-signed&quot; certificate or a certificate from Apple. There is one difference: if you use a self-signed certificate, Gatekeeper in OS X 10.8 (&quot;Mountain Lion&quot;) and higher may not allow the first run of the self-signed application by double-clicking it. The user will need to Control-click or right-click and select &quot;Open&quot;. That is because the Gatekeeper default is to allow the first launch of an application only if it is signed by an Apple-recognized developer.</p>
<p>To get a self-signed code signing certificate, use the OS X Keychain Assistant application. Apple used to have instructions on doing this but they have disappeared. They may be accessed from the Internet Archive using <a href="http://web.archive.org/web/20090119080759/http://developer.apple.com/documentation/Security/Conceptual/CodeSigningGuide/Procedures/chapter_3_section_2.html">this link</a>,</p>
<p>To get an certificate from Apple, you must be an <a href="https://developer.apple.com">Apple Developer</a>. Request your Apple certificates and install them into your Keychain. You can do this from Xcode.</p>
<h3 id="designated-requirement-binary">Designated Requirement Binary</h3>
<p>You can use a &quot;designated requirement binary&quot; to set requirements for how an application is to be signed. For example, you can require that the Info.plist's CFBundleIdentifier be &quot;com.example.foo&quot;. Generating this binary can be done in Xcode, consult Apple's documentation. The only catch is that requirements created in some recent versions of Xcode are considered invalid by OS X 10.5 (&quot;Lion&quot;) and will cause problems. Tunnelblick uses a signing requirements binary created on an older version of Xcode that does not cause this problem. See <a href="http://fetchsoftworks.com/fetch/blog/gatekeeper-vs-leopard-an-ongoing-tale">Gatekeeper vs. Leopard: an ongoing tale</a>.</p>
<h2 id="signing-script">SIGNING SCRIPT</h2>
<p>Use following script to sign Tunnelblick or a rebranded version of Tunnelblick:</p>
<pre><code>#!/bin/bash
#
# sign-tunnelblick
#
# A script to digitally sign Tunnelblick.app or a rebranded version of Tunnelblick.app
#

if [ &quot;$1&quot; == &quot;&quot; ] ; then
  echo &quot;Usage:&quot;
  echo &quot;     sign-tunnelblick    app_path    certificate_name    requirements_path&quot;
  exit 1
fi

app_path=&quot;$1&quot;
certificate_name=&quot;$2&quot;
requirements_path=&quot;$3&quot;

# Sign the helpers
codesign -s &quot;${certificate_name}&quot;    -r &quot;${requirements_path}&quot;    &quot;${app_path}/Contents/Resources/atsystemstart&quot;
codesign -s &quot;${certificate_name}&quot;    -r &quot;${requirements_path}&quot;    &quot;${app_path}/Contents/Resources/installer&quot;
codesign -s &quot;${certificate_name}&quot;    -r &quot;${requirements_path}&quot;    &quot;${app_path}/Contents/Resources/openvpnstart&quot;
codesign -s &quot;${certificate_name}&quot;    -r &quot;${requirements_path}&quot;    &quot;${app_path}/Contents/Resources/process-network-changes&quot;
codesign -s &quot;${certificate_name}&quot;    -r &quot;${requirements_path}&quot;    &quot;${app_path}/Contents/Resources/standardize-scutil-output&quot;

# Before signing each of the signed tun &amp; tap kexts, remove &#39; Unsigned&#39; from its Info.plist
signed_tun_path=&quot;${app_path}/Contents/Resources/tun-signed.kext&quot;
signed_tap_path=&quot;${app_path}/Contents/Resources/tap-signed.kext&quot;
tun_path=&quot;${app_path}/Contents/Resources/tun.kext&quot;
tap_path=&quot;${app_path}/Contents/Resources/tap.kext&quot;
rm -r &quot;${signed_tun_path}&quot;
rm -r &quot;${signed_tap_path}&quot;
sed -e &quot;s| Unsigned||g&quot; &quot;${tun_path}/Contents/Info.plist&quot; &gt; &quot;${signed_tun_path}/Contents/Info.plist&quot;
sed -e &quot;s| Unsigned||g&quot; &quot;${tap_path}/Contents/Info.plist&quot; &gt; &quot;${signed_tap_path}/Contents/Info.plist&quot;

# Sign the *signed* tun and tap kexts, but don&#39;t sign the other tun and tap kexts
codesign -s &quot;${certificate_name}&quot;    -r &quot;${requirements_path}&quot;    &quot;${signed_tun_path}&quot;
codesign -s &quot;${certificate_name}&quot;    -r &quot;${requirements_path}&quot;    &quot;${signed_tap_path}&quot;

# Sign the openvpn and openvpn-down-root.so binaries
for d in `ls &quot;${app_path}/Contents/Resources/openvpn&quot;`
do
  if [ &quot;${d}&quot; != &quot;default&quot; ] ; then
    codesign -s &quot;${certificate_name}&quot;    -r &quot;${requirements_path}&quot;    &quot;${app_path}/Contents/Resources/openvpn/${d}/openvpn&quot;
    codesign -s &quot;${certificate_name}&quot;    -r &quot;${requirements_path}&quot;    &quot;${app_path}/Contents/Resources/openvpn/${d}/openvpn-down-root.so&quot;
  fi
done

# Sign Sparkle
codesign -s &quot;${certificate_name}&quot;    -r &quot;${requirements_path}&quot;    &quot;${app_path}/Contents/Frameworks/Sparkle.framework/Versions/A&quot;

# Sign the application itself
codesign -s &quot;${certificate_name}&quot;    -r &quot;${requirements_path}&quot;    &quot;${app_path}&quot;</code></pre>



   </td>
  </tr>
</table>
</div>
</div>



<div class="bottom-translation">
  <span title="view in German or another language using Google Translate">               <a lang="de"      class="bottom-translation" href="https://translate.google.com/translate?hl=de&amp;sl=en&amp;tl=de&amp;u=https%3A%2F%2Fwww.tunnelblick.net%2FcSigningTunnelblick.html&amp;sandbox=1">&nbsp;&nbsp;Deutsch&nbsp;&nbsp;         </a></span>
  <span title="view in French or another language using Google Translate">               <a lang="fr"      class="bottom-translation" href="https://translate.google.com/translate?hl=fr&amp;sl=en&amp;tl=fr&amp;u=https%3A%2F%2Fwww.tunnelblick.net%2FcSigningTunnelblick.html&amp;sandbox=1">&nbsp;&nbsp;Français&nbsp;&nbsp;        </a></span>
  <span title="view in Chinese (simplified) or another language using Google Translate"> <a lang="zh-Hans" class="bottom-translation" href="https://translate.google.com/translate?hl=zh-CN&amp;sl=en&amp;tl=zh-CN&amp;u=https%3A%2F%2Fwww.tunnelblick.net%2FcSigningTunnelblick.html&amp;sandbox=1">&nbsp;&nbsp;中文(简体)&nbsp;&nbsp; </a></span>
  <span title="view in Russian or another language using Google Translate">              <a lang="ru"      class="bottom-translation" href="https://translate.google.com/translate?hl=ru&amp;sl=en&amp;tl=ru&amp;u=https%3A%2F%2Fwww.tunnelblick.net%2FcSigningTunnelblick.html&amp;sandbox=1">&nbsp;&nbsp;Русский&nbsp;&nbsp;         </a></span>
  <span title="view in Spanish or another language using Google Translate">              <a lang="es"      class="bottom-translation" href="https://translate.google.com/translate?hl=es&amp;sl=en&amp;tl=es&amp;u=https%3A%2F%2Fwww.tunnelblick.net%2FcSigningTunnelblick.html&amp;sandbox=1">&nbsp;&nbsp;Español&nbsp;&nbsp;         </a></span>
  <span title="view in Japanese or another language using Google Translate">             <a lang="ja"      class="bottom-translation" href="https://translate.google.com/translate?hl=ja&amp;sl=en&amp;tl=ja&amp;u=https%3A%2F%2Fwww.tunnelblick.net%2FcSigningTunnelblick.html&amp;sandbox=1">&nbsp;&nbsp;日本語&nbsp;&nbsp;           </a></span>
  <span title="view in Italian or another language using Google Translate">              <a                class="bottom-translation" href="https://translate.google.com/translate?hl=it&amp;sl=en&amp;tl=it&amp;u=https%3A%2F%2Fwww.tunnelblick.net%2FcSigningTunnelblick.html&amp;sandbox=1">&nbsp;&nbsp;&hellip;&nbsp;&nbsp;        </a></span>
</div>
<div class="bottom-copyright">
  Copyright &copy; 2015-2017 by The Tunnelblick Project.&nbsp;&nbsp;
</div>
</body>
</html>
